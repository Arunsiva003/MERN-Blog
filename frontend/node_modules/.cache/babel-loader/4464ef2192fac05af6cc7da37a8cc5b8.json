{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\aarun\\\\GitClones\\\\MERN-BLOG-PROJECT\\\\frontend\\\\src\\\\pages\\\\details\\\\DetailsPages.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useContext, useEffect, useState } from \"react\";\nimport \"./details.css\";\nimport \"../../components/header/header.css\";\nimport { useLocation } from \"react-router-dom\";\nimport axios from \"axios\";\nimport { Link } from \"react-router-dom\";\nimport { BsPencilSquare } from \"react-icons/bs\";\nimport { AiOutlineDelete } from \"react-icons/ai\";\nimport { Context } from \"../../context/Context\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport const DetailsPages = () => {\n  _s();\n\n  const location = useLocation();\n  console.log(location);\n  const path = location.pathname.split(\"/\")[2]; // step 4 for update\n\n  const [title, setTitle] = useState(\"\");\n  const [desc, setDesc] = useState(\"\");\n  const [update, setUpdate] = useState(false); //setp 2\n\n  const [post, setPost] = useState({});\n  useEffect(() => {\n    const getPost = async () => {\n      const res = await axios.get(\"/posts/\" + path);\n      console.log(res); //setp 2\n\n      setPost(res.data); //setp 4\n\n      setTitle(res.data.title);\n      setDesc(res.data.desc);\n    };\n\n    getPost();\n  }, [path]); // step 3\n  // file create garne time add garne\n\n  const PublicFlo = \"http://localhost:5000/images/\";\n  const {\n    user\n  } = useContext(Context);\n\n  const handleDelete = async () => {\n    try {\n      await axios.delete(`/posts/${post._id}`, {\n        data: {\n          username: user.username\n        }\n      });\n      window.location.replace(\"/\");\n    } catch (error) {}\n  }; // setp 4\n\n\n  const handleUpdate = async () => {\n    try {\n      await axios.put(`/posts/${post._id}`, {\n        username: user.username,\n        title,\n        desc\n      });\n      window.location.reload();\n    } catch (error) {}\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"section\", {\n      className: \"singlePage\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"left\",\n          children: post.photo && /*#__PURE__*/_jsxDEV(\"img\", {\n            src: PublicFlo + post.photo,\n            alt: \"\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 60,\n            columnNumber: 48\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"right\",\n          children: [post.username === (user === null || user === void 0 ? void 0 : user.username) && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"buttons\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"button\",\n              onClick: () => setUpdate(true),\n              children: /*#__PURE__*/_jsxDEV(BsPencilSquare, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 65,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 64,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"button\",\n              onClick: handleDelete,\n              children: /*#__PURE__*/_jsxDEV(AiOutlineDelete, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 68,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 67,\n              columnNumber: 17\n            }, this), update && /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"button\",\n              onClick: handleUpdate,\n              children: \"Update\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 71,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 63,\n            columnNumber: 15\n          }, this), update ? /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            value: title,\n            className: \"updateInput\",\n            onChange: e => setTitle(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 78,\n            columnNumber: 23\n          }, this) : /*#__PURE__*/_jsxDEV(\"h1\", {\n            children: post.title\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 78,\n            columnNumber: 128\n          }, this), update ? /*#__PURE__*/_jsxDEV(\"textarea\", {\n            value: desc,\n            cols: \"30\",\n            rows: \"10\",\n            className: \"updateInput\",\n            onChange: e => setDesc(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 79,\n            columnNumber: 23\n          }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n            children: post.desc\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 79,\n            columnNumber: 146\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"Author: \", /*#__PURE__*/_jsxDEV(Link, {\n              to: `/?user=${post.username}`,\n              children: post.username\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 82,\n              columnNumber: 23\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 81,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n};\n\n_s(DetailsPages, \"bpYp4j6dOczWtcbhc6ypw/Kvj6o=\", false, function () {\n  return [useLocation];\n});\n\n_c = DetailsPages;\n\nvar _c;\n\n$RefreshReg$(_c, \"DetailsPages\");","map":{"version":3,"names":["React","useContext","useEffect","useState","useLocation","axios","Link","BsPencilSquare","AiOutlineDelete","Context","DetailsPages","location","console","log","path","pathname","split","title","setTitle","desc","setDesc","update","setUpdate","post","setPost","getPost","res","get","data","PublicFlo","user","handleDelete","delete","_id","username","window","replace","error","handleUpdate","put","reload","photo","e","target","value"],"sources":["C:/Users/aarun/GitClones/MERN-BLOG-PROJECT/frontend/src/pages/details/DetailsPages.jsx"],"sourcesContent":["import React, { useContext, useEffect, useState } from \"react\"\r\nimport \"./details.css\"\r\nimport \"../../components/header/header.css\"\r\nimport { useLocation } from \"react-router-dom\"\r\nimport axios from \"axios\"\r\nimport { Link } from \"react-router-dom\"\r\nimport { BsPencilSquare } from \"react-icons/bs\"\r\nimport { AiOutlineDelete } from \"react-icons/ai\"\r\nimport { Context } from \"../../context/Context\"\r\n\r\nexport const DetailsPages = () => {\r\n  const location = useLocation()\r\n  console.log(location)\r\n  const path = location.pathname.split(\"/\")[2]\r\n\r\n  // step 4 for update\r\n  const [title, setTitle] = useState(\"\")\r\n  const [desc, setDesc] = useState(\"\")\r\n  const [update, setUpdate] = useState(false)\r\n\r\n  //setp 2\r\n  const [post, setPost] = useState({})\r\n  useEffect(() => {\r\n    const getPost = async () => {\r\n      const res = await axios.get(\"/posts/\" + path)\r\n      console.log(res)\r\n      //setp 2\r\n      setPost(res.data)\r\n      //setp 4\r\n      setTitle(res.data.title)\r\n      setDesc(res.data.desc)\r\n    }\r\n    getPost()\r\n  }, [path])\r\n\r\n  // step 3\r\n  // file create garne time add garne\r\n  const PublicFlo = \"http://localhost:5000/images/\"\r\n  const { user } = useContext(Context)\r\n\r\n  const handleDelete = async () => {\r\n    try {\r\n      await axios.delete(`/posts/${post._id}`, { data: { username: user.username } })\r\n      window.location.replace(\"/\")\r\n    } catch (error) {}\r\n  }\r\n\r\n  // setp 4\r\n  const handleUpdate = async () => {\r\n    try {\r\n      await axios.put(`/posts/${post._id}`, { username: user.username, title, desc })\r\n      window.location.reload()\r\n    } catch (error) {}\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <section className='singlePage'>\r\n        <div className='container'>\r\n          <div className='left'>{post.photo && <img src={PublicFlo + post.photo} alt='' />}</div>\r\n          <div className='right'>\r\n            {post.username === user?.username && (\r\n              <div className='buttons'>\r\n                <button className='button' onClick={() => setUpdate(true)}>\r\n                  <BsPencilSquare />\r\n                </button>\r\n                <button className='button' onClick={handleDelete}>\r\n                  <AiOutlineDelete />\r\n                </button>\r\n                {update && (\r\n                  <button className='button' onClick={handleUpdate}>\r\n                    Update\r\n                  </button>\r\n                )}\r\n              </div>\r\n            )}\r\n\r\n            {update ? <input type='text' value={title} className='updateInput' onChange={(e) => setTitle(e.target.value)} /> : <h1>{post.title}</h1>}\r\n            {update ? <textarea value={desc} cols='30' rows='10' className='updateInput' onChange={(e) => setDesc(e.target.value)}></textarea> : <p>{post.desc}</p>}\r\n\r\n            <p>\r\n              Author: <Link to={`/?user=${post.username}`}>{post.username}</Link>\r\n            </p>\r\n          </div>\r\n        </div>\r\n      </section>\r\n    </>\r\n  )\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}